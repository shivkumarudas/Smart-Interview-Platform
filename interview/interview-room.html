<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Interview | InterviewAI</title>

  <link rel="stylesheet" href="css/interview-room.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- LOTTIE FOR AI AVATAR -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>

<body>

<div class="interview-container">

  <!-- HEADER -->
  <header class="header">
    <h2>Live AI Interview</h2>
    <span class="status" id="progressText">Ready</span>
  </header>

  <!-- MAIN INTERVIEW AREA -->
  <div class="room">

    <!-- USER CAMERA -->
    <div class="panel user-panel">
      <h3>You</h3>
      <video id="userVideo" autoplay muted></video>
      <p class="hint">Camera is live</p>
    </div>

    <!-- AI INTERVIEWER -->
    <div class="panel ai-panel">
      <h3>AI Interviewer</h3>

      <!-- AI AVATAR -->
      <div class="ai-avatar">
        <lottie-player
          id="aiAvatar"
          src="assets/ai-idle.json"
          background="transparent"
          speed="1"
          loop
          autoplay>
        </lottie-player>
      </div>

      <!-- AI SPEECH TEXT -->
      <div class="ai-text" id="aiText">
        Hello! I will be your interviewer today.
      </div>
    </div>

  </div>

  <!-- ANSWER BOX -->
  <div class="answer-box">
    <p class="label">Your Answer</p>
    <div id="answerText" class="answer-text">
      Click Start Answer and speak...
    </div>

    <div class="coach-tip" id="coachTip"></div>

    <div class="answer-controls">
      <button id="startAnswer" type="button">Start Answer</button>
      <button id="stopAnswer" type="button" disabled>Stop</button>
    </div>

    <textarea id="typedAnswer" class="typed-answer" rows="4" placeholder="Or type your answer here (optional)"></textarea>
    <button id="submitTyped" class="typed-btn" type="button">Submit Typed Answer</button>

    <div class="mic-meter" aria-label="Microphone level">
      <div id="micLevel" class="mic-level"></div>
    </div>
  </div>

  <!-- FOOTER CONTROLS -->
  <div class="controls">
    <button class="mic-btn" id="repeatQuestion" type="button">Repeat</button>
    <button class="mic-btn" id="skipQuestion" type="button">Skip</button>
    <button class="end-btn" id="endInterviewBtn" type="button">End Interview</button>
  </div>

</div>

<!-- hidden canvas for future emotion detection -->
<canvas id="faceCanvas" width="300" height="200" style="display:none;"></canvas>

<script src="../js/api.js"></script>
<script src="js/interview-room.js"></script>
</body>
</html>
